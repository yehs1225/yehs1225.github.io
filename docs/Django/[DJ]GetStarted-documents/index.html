<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.15">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Yeh&#39;s blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Yeh&#39;s blog Atom Feed"><title data-react-helmet="true">GetStarted-documents | Yeh&#x27;s blog</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://your-docusaurus-test-site.com/docs/Django/[DJ]GetStarted-documents"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="GetStarted-documents | Yeh&#x27;s blog"><meta data-react-helmet="true" name="description" content="Know Django"><meta data-react-helmet="true" property="og:description" content="Know Django"><link data-react-helmet="true" rel="icon" href="/img/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://your-docusaurus-test-site.com/docs/Django/[DJ]GetStarted-documents"><link data-react-helmet="true" rel="alternate" href="https://your-docusaurus-test-site.com/docs/Django/[DJ]GetStarted-documents" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://your-docusaurus-test-site.com/docs/Django/[DJ]GetStarted-documents" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.f2b17ad4.css">
<link rel="preload" href="/assets/js/runtime~main.39d34c20.js" as="script">
<link rel="preload" href="/assets/js/main.5c1be6b3.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/favicon.png" alt="My Site Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/favicon.png" alt="My Site Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">My Site</b></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Notes</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/yehs1225" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_Pssr toggle_TdHA toggleDisabled_jDku"><div class="toggleTrack_SSoT" role="button" tabindex="-1"><div class="toggleTrackCheck_XobZ"><span class="toggleIcon_eZtF">🌜</span></div><div class="toggleTrackX_YkSC"><span class="toggleIcon_eZtF">🌞</span></div><div class="toggleTrackThumb_uRm4"></div></div><input type="checkbox" class="toggleScreenReader_JnkT" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_CW9Y"><nav class="menu thin-scrollbar menu_SkdO"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">Notes Intro</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/docs/Algorithm/Algorithm[1]">Algorithm</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/docs/BasicKnowlege/CSS-RWD切版練習">BasicKnowlege</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/docs/DataStructures/Graph">DataStructures</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_VCh3" aria-current="page" href="/docs/Django/[DJ]Deploy">Django</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Django/[DJ]Deploy">Deploy</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/Django/[DJ]GetStarted-documents">GetStarted-documents</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Django/[DJ]GetStartedBuildCRM[1]">GetStarted - build CRM [1]</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Django/[DJ]GetStartedBuildCRM[2]">GetStarted - build CRM [2]</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Django/[DJ]PackagesAndTools">Packages And Tools</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Django/[DJ]RestFramework">Rest Framework</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/docs/Docker/Docker1基本介紹">Docker</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/docs/JavaScript/JavaScript-this">JavaScript</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/docs/Reactjs/React_ES6">Reactjs</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/docs/Tools/Command-Line-and-Vim">Tools</a></div></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><h1>GetStarted-documents</h1><h2 class="anchor anchorWithStickyNavbar_mojV" id="know-django">Know Django<a class="hash-link" href="#know-django" title="Direct link to heading">​</a></h2><h5 class="anchor anchorWithStickyNavbar_mojV" id="what-is-django">What is Django<a class="hash-link" href="#what-is-django" title="Direct link to heading">​</a></h5><p>Django is a Python based web framework for building dynamic web applications.</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="why">Why<a class="hash-link" href="#why" title="Direct link to heading">​</a></h5><p>Make it easier to build better Web apps more quickly and less code.</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="django-project-and-apps">Django Project and Apps<a class="hash-link" href="#django-project-and-apps" title="Direct link to heading">​</a></h4><h5 class="anchor anchorWithStickyNavbar_mojV" id="project">Project<a class="hash-link" href="#project" title="Direct link to heading">​</a></h5><p>It is the overall web application setup and all parts and settings.</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="apps">Apps<a class="hash-link" href="#apps" title="Direct link to heading">​</a></h5><p>It is a subcomponent or submodule of the Project and it is independent of other Apps even though they all function in the same Project.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="set-up-miniconda">Set up miniconda<a class="hash-link" href="#set-up-miniconda" title="Direct link to heading">​</a></h2><p>common conda command:</p><ul><li>build env : <code>conda create --name &lt;&#x27;env_name&#x27;&gt; python=3.9</code>(the version u want.)</li><li>enter env  : <code>conda activate &lt;&#x27;env_name&#x27;&gt;</code></li><li>leave env : <code>conda deactivate</code></li></ul><p>if you are using VSCode, Ctrl + Shift + P -&gt; Type and select &#x27;Python: Select Interpreter&#x27; to change to the current environment. </p><h2 class="anchor anchorWithStickyNavbar_mojV" id="start-using-django">Start using django<a class="hash-link" href="#start-using-django" title="Direct link to heading">​</a></h2><ul><li><h4 class="anchor anchorWithStickyNavbar_mojV" id="build-a-project-django-admin-startproject-mysite">Build a project :<code>django-admin startproject mysite</code><a class="hash-link" href="#build-a-project-django-admin-startproject-mysite" title="Direct link to heading">​</a></h4><p><strong>structure</strong></p><ul><li>mysite/   =&gt; <em>container of project (can rename)</em><ul><li>manage.py</li><li>mysite/ =&gt; <em>python packeage for Ur project</em><ul><li><strong> init</strong>.py =&gt; <em>Tell python that this directory should be considered a Python package</em></li><li>settings.py =&gt; <em>Tell U</em> all about how settings work</li><li>urls.py =&gt; <em>The URL declarations for this Django project; a “table of contents” of your Django-powered site. (Django lets you design URLs however you want, with no framework limitations.)</em></li><li>asgi.py =&gt; <em>An entry-point for ASGI-compatible web servers to serve your project.</em> </li><li>wsgi.py =&gt;  <em>An entry-point for WSGI-compatible web servers to serve your project.</em></li></ul></li></ul></li></ul></li><li><h4 class="anchor anchorWithStickyNavbar_mojV" id="verify-project-work">Verify project work?<a class="hash-link" href="#verify-project-work" title="Direct link to heading">​</a></h4><ul><li><p>type<code>python manage.py runserver</code> </p><p>Ignore warning, we&#x27;ll set databases migrations later.U can check if it success at http://localhost:8000/ </p><p>U can change port (to 8080)<code>python manage.py runserver 8080</code></p></li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="build-an-polls-app">Build an polls app<a class="hash-link" href="#build-an-polls-app" title="Direct link to heading">​</a></h2><ol><li><p><code>python manage.py startapp polls</code> create a directory called &quot;polls&quot;, directory structure looks like</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">mysite/   </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mysite/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    db.sqlite3/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    manage.py</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    polls/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        __init__.py</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        admin.py</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        apps.py</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        migrations/？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            __init__.py</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        models.py</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        tests.py</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        views.py</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div></li><li><p>write code in polls/views.py</p></li><li><p>add and write in new file &lt; urls.py &gt;  To call the view, we need to map it to a URL</p><p><strong>Be care of 2 different urls.py ! Or U&#x27;ll got 404 page not error :(</strong></p><div class="codeBlockContainer_I0IT language-jsx theme-code-block"><div class="codeBlockContent_wNvx jsx"><pre tabindex="0" class="prism-code language-jsx codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">#mysite</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">polls</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">urls</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">py</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from django</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">urls </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> path</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> views</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">urlpatterns </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">path</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> views</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">index</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> name</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;index&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>And in <strong>another urls.py</strong></p><div class="codeBlockContainer_I0IT language-jsx theme-code-block"><div class="codeBlockContent_wNvx jsx"><pre tabindex="0" class="prism-code language-jsx codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">#mysite</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">mtysite</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">urls</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">py</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from django</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">contrib </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> admin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from django</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">urls </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> include</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> path</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">urlpatterns </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">path</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;polls/&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">include</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;polls.urls&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">path</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;admin/&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> admin</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">site</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">urls</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#You should always use </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">include()</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token plain"> when you include other </span><span class="token constant" style="color:#36acaa">URL</span><span class="token plain"> patterns</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">admin.site.urls</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token plain"> is the only exception to </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div></li></ol><h3 class="anchor anchorWithStickyNavbar_mojV" id="set-up-a-database">Set up a database<a class="hash-link" href="#set-up-a-database" title="Direct link to heading">​</a></h3><h5 class="anchor anchorWithStickyNavbar_mojV" id="in-settingspy">In settings.py<a class="hash-link" href="#in-settingspy" title="Direct link to heading">​</a></h5><ul><li>U&#x27;ll need to set in settings.py if U want to use databases other than SQLite(default choice)</li><li>INSTALLED_APPS = <!-- -->[...]<!-- --> can be revise if U don&#x27;t need.</li><li>set TIME_ZONE :&#x27;Asia/Taipei&#x27; ( <a href="https://en.wikipedia.org/wiki/List_of_tz_database_time_zones" target="_blank" rel="noopener noreferrer">List of tz database time zones - Wikipedia</a>)</li></ul><h5 class="anchor anchorWithStickyNavbar_mojV" id="creating-models">Creating models<a class="hash-link" href="#creating-models" title="Direct link to heading">​</a></h5><ul><li><p>Concept of models in django [<a href="https://www.learncodewithmike.com/2020/03/django-model-migration.html" target="_blank" rel="noopener noreferrer">Django教學3<!-- -->]<!-- -->Django Migration(資料遷移)的重要觀念 (learncodewithmike.com)</a>	</p></li><li><p>Concept of ORM( Object Relational Mapping) [<a href="https://ithelp.ithome.com.tw/articles/10207752" target="_blank" rel="noopener noreferrer">Day20<!-- -->]<!-- --> 資料庫設計概念 - ORM - iT 邦幫忙::一起幫忙解決難題，拯救 IT 人的一天 (ithome.com.tw)</a></p></li><li><p>Edit in polls/models.py</p><p><strong>It&#x27;s vital to add <code>__str__()</code> method.</strong></p><p>U can also add custom method. (e.g. was_published_recently)</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">from django.db import models</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Create 2 tables.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class Question(models.Model):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    question_text = models.CharField(max_length=200)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub_date = models.DateTimeField(&#x27;date published&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    #neccessary</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def __str__(self):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return self.question_text</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    #custom method</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def was_published_recently(self):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return self.pub_date &gt;= timezone.now() - datetime.timedelta(days=1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class Choice(models.Model):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    question = models.ForeignKey(Question, on_delete=models.CASCADE)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    choice_text = models.CharField(max_length=200)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    votes = models.IntegerField(default=0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def __str__(self):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return self.question_text</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div></li></ul><h5 class="anchor anchorWithStickyNavbar_mojV" id="activate-models">Activate models<a class="hash-link" href="#activate-models" title="Direct link to heading">​</a></h5><p>The above &quot;model code&quot; gives Django <strong>(1)</strong> CREATE TABLE(schema) <strong>(2)</strong> Create a Python database-access API for accessing those objects(Question &amp; Choice).</p><ul><li><p>Tell our project that the <strong>polls</strong> app is installed. (Django app is pluggable)</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">#mysite/settings.py</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">INSTALLED_APPS = [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;polls.apps.PollsConfig&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;django.contrib.admin&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ....,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;django.contrib.staticfiles&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">]</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div></li><li><p><code>python manage.py makemigrations polls</code> <em>Create migrations for those changes</em></p><p>U&#x27;ll see migrations for &#x27;polls&#x27; , &lt; storing position &gt;, Create model Question , Create model Choice</p><p>Use  <code>makemigrations</code> when U make changes in Model(table) and then Django stores the changes. All migration are stored in polls/migrations/XXX.py</p><ul><li><p><code>python manage.py sqlmigrate polls 0001</code>	</p><p>See more readable TABLE.</p></li></ul></li><li><p><code>python manage.py migrate</code>	<em>apply those changes</em></p></li></ul><h5 class="anchor anchorWithStickyNavbar_mojV" id="playing-with-the-api">Playing with the API<a class="hash-link" href="#playing-with-the-api" title="Direct link to heading">​</a></h5><ul><li><p><code>python manage.py shell</code></p><p>By this command, we can use our Models.</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain"># First Import the model classes we just wrote.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from polls.models import Choice, Question </span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><ul><li>References of Playing APIs : <a href="https://docs.djangoproject.com/en/4.0/topics/db/queries/" target="_blank" rel="noopener noreferrer">Making queries | Django documentation | Django (djangoproject.com)</a></li><li>Related objects : <a href="https://docs.djangoproject.com/en/4.0/ref/models/relations/" target="_blank" rel="noopener noreferrer">https://docs.djangoproject.com/en/4.0/ref/models/relations/</a></li><li>Field lookups : <a href="https://docs.djangoproject.com/en/4.0/topics/db/queries/#field-lookups-intro" target="_blank" rel="noopener noreferrer">Making queries | Django documentation | Django (djangoproject.com)</a></li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="introducing-the-django-admin">Introducing the Django Admin<a class="hash-link" href="#introducing-the-django-admin" title="Direct link to heading">​</a></h2><p>Django build a Admin page automatically. Thus, we can make revise our data conveniently.</p><ul><li><p><code>python manage.py createsuperuser</code></p></li><li><p><code>python manage.py runserver</code></p></li><li><p>make the <strong>poll app</strong> modifiable in the admin</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">#polls/admin.py</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from .models import Question</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">admin.site.register(Question)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div></li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="write-more-views">Write more views<a class="hash-link" href="#write-more-views" title="Direct link to heading">​</a></h2><ul><li><p>edit in polls/views.py , add new lines besides <code>def index(){...}</code></p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">def detail(request, question_id):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return HttpResponse(&quot;You&#x27;re looking at question %s.&quot; % question_id)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def results(request, question_id):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    response = &quot;You&#x27;re looking at the results of question %s.&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return HttpResponse(response % question_id)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def vote(request, question_id):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return HttpResponse(&quot;You&#x27;re voting on question %s.&quot; % question_id)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div></li><li><p>edit in polls/urls.py , when we have new views , do not forget add <code>path()</code> call in urls.py</p><p><code>&lt; int:question_id&gt;</code> </p><ul><li>「 &lt; &gt; 」captures part of the URL and send it as keyword argument to the view function</li><li>「int」is convertor , 「question_id」 will be used to identify the matched pattern , seperated by 「:」</li></ul><div class="codeBlockContainer_I0IT language-jsx theme-code-block"><div class="codeBlockContent_wNvx jsx"><pre tabindex="0" class="prism-code language-jsx codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">urlpatterns </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # ex</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token regex regex-delimiter" style="color:#36acaa">/</span><span class="token regex regex-source language-regex" style="color:#36acaa">polls</span><span class="token regex regex-delimiter" style="color:#36acaa">/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">path</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> views</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">index</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> name</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;index&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    #</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">-</span><span class="token keyword" style="color:#00009f">new</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # ex</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain">polls</span><span class="token operator" style="color:#393A34">/</span><span class="token number" style="color:#36acaa">5</span><span class="token operator" style="color:#393A34">/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">path</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;&lt;int:question_id&gt;/&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> views</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">detail</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> name</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;detail&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # ex</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain">polls</span><span class="token operator" style="color:#393A34">/</span><span class="token number" style="color:#36acaa">5</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">results</span><span class="token operator" style="color:#393A34">/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">path</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;&lt;int:question_id&gt;/results/&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> views</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">results</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> name</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;results&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # ex</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain">polls</span><span class="token operator" style="color:#393A34">/</span><span class="token number" style="color:#36acaa">5</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">vote</span><span class="token operator" style="color:#393A34">/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">path</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;&lt;int:question_id&gt;/vote/&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> views</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">vote</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> name</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;vote&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div></li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="let-views-actually-do-something">Let views actually do something<a class="hash-link" href="#let-views-actually-do-something" title="Direct link to heading">​</a></h3><p>2 things views should do : (1) returning HttpResponse (2) rasing exception (e.g.Http404)</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="1-returning-httpresponse">(1) returning HttpResponse<a class="hash-link" href="#1-returning-httpresponse" title="Direct link to heading">​</a></h5><ul><li><p>show latest 5 dataset in system</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">def index(request):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    latest_question_list = Question.objects.order_by(&#x27;-pub_date&#x27;)[:5]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    output = &#x27;, &#x27;.join([q.question_text for q in latest_question_list])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return HttpResponse(output)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Leave the rest of the views (detail, results, vote) unchanged</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><ul><li><p>change template </p><p>create new directory in <em>/polls</em> named <em>templates</em> , then in <em>/polls/template</em> create new directory named <em>polls</em> , finally create <em>index.html</em>.</p><p><strong>We should not avoid create subdirectory <!-- -->*<!-- -->polls<!-- -->*<!-- --> in templates , otherwise if we have same template name in different apps , Django may got the wrong one.</strong></p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;!-- polls/templates/polls/index.html --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;html&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;head&gt;&lt;/head&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;body&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;h1&gt;{{ question.question_text }}&lt;/h1&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;ul&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {% for choice in question.choice_set.all %}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;li&gt;{{ choice.choice_text }}&lt;/li&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {% endfor %}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/ul&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/body&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/html&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div></li><li><p>use template in views.py</p><ol><li><code>from django.template import loader</code></li><li><code>template = loader.get_template(&lt;&#x27;app_name/index.html&#x27;&gt;)</code></li><li><code>return HttpResponse(template.render(context, request))</code></li></ol><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">#polls/views</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from django.template import loader</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def index(request):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    latest_question_list = Question.objects.order_by(&#x27;-pub_date&#x27;)[:5]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    template = loader.get_template(&#x27;polls/index.html&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    context = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &#x27;latest_question_list&#x27;: latest_question_list,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return HttpResponse(template.render(context, request))</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div></li></ul><h5 class="anchor anchorWithStickyNavbar_mojV" id="shortcut--render">Shortcut : <code>render()</code><a class="hash-link" href="#shortcut--render" title="Direct link to heading">​</a></h5><p>It is idiom to load a template , <strong>fiil context and return Httpresponse</strong>. Therefore use <code>render()</code>.</p><ol><li><p><code>from django.shortcuts import render</code></p><p>No longer need to import <code>loader</code> and <code>HttpResponse</code></p></li><li><p>modify return()</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">from django.shortcuts import render</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from .models import Question</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def index(request):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    latest_question_list = Question.objects.order_by(&#x27;-pub_date&#x27;)[:5]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    context = {&#x27;latest_question_list&#x27;: latest_question_list}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return render(request, &#x27;polls/index.html&#x27;, context)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div></li></ol></li></ul><h5 class="anchor anchorWithStickyNavbar_mojV" id="2-rasing-exception">(2) rasing exception<a class="hash-link" href="#2-rasing-exception" title="Direct link to heading">​</a></h5><ul><li><h5 class="anchor anchorWithStickyNavbar_mojV" id="rasing-a-404-error">Rasing a 404 error<a class="hash-link" href="#rasing-a-404-error" title="Direct link to heading">​</a></h5><ol><li><p><code>from django.http import Http404</code></p></li><li><p>add <code>def detail():{...}</code></p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">from django.http import Http404</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from django.shortcuts import render</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from .models import Question</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def detail(request, question_id):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    try:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        question = Question.objects.get(pk=question_id)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    except Question.DoesNotExist:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        raise Http404(&quot;Question does not exist&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return render(request, &#x27;polls/detail.html&#x27;, {&#x27;question&#x27;: question})</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div></li><li><p>add new file <em>detail.html</em> in <em>polls/templates/polls/detail.html</em></p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;!-- polls/templates/polls/detail.html --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;html&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;head&gt;&lt;/head&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;body&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {{ question }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/body&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/html&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div></li></ol><h5 class="anchor anchorWithStickyNavbar_mojV" id="shortcut--get_object_or_404modelkeyword-arguments">Shortcut : <code>get_object_or_404(&lt;&#x27;model&#x27;&gt;,&lt;keyword arguments&gt;)</code><a class="hash-link" href="#shortcut--get_object_or_404modelkeyword-arguments" title="Direct link to heading">​</a></h5><p>  Pass <strong><code>get()</code></strong> function of model&#x27;s manager, rasing Http404 if the object not exist. The main reasion to use this is to maintain 	<strong>loos coupling</strong> , which is foremast design goals of Django. Also there are <code>get_list_or_404()</code>, which works just like this , but 	using <code>filter()</code> instead of <code>get()</code>.</p><ol><li><code>from django.shortcuts import get_object_or_404</code></li><li>no longer need <code>try:...except</code></li></ol><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">  from django.shortcuts import get_object_or_404, render</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  from .models import Question</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  def detail(request, question_id):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      question = get_object_or_404(Question, pk=question_id)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      return render(request, &#x27;polls/detail.html&#x27;, {&#x27;question&#x27;: question})</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div></li></ul><h5 class="anchor anchorWithStickyNavbar_mojV" id="use-the-template-system">Use the template system<a class="hash-link" href="#use-the-template-system" title="Direct link to heading">​</a></h5><p>More : <a href="https://docs.djangoproject.com/en/4.0/topics/templates/" target="_blank" rel="noopener noreferrer">Templates | Django documentation | Django (djangoproject.com)</a></p><p>It generate HTML dynamically in a convenient way. The <a href="https://docs.djangoproject.com/en/4.0/ref/templates/language/" target="_blank" rel="noopener noreferrer">Django template language</a> is Django’s own template system. If you don’t have a pressing reason to choose another backend, you should use the DTL, especially if you’re writing a pluggable application and you intend to distribute templates.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="removing-hardcoded-urls-in-templates">Removing hardcoded URLs in templates<a class="hash-link" href="#removing-hardcoded-urls-in-templates" title="Direct link to heading">​</a></h3><p>In <em>polls/index.html</em>, the below code is hardcoded, tightly-coupled approach.</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;!--polls/index.html--&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;li&gt;&lt;a href=&quot;/polls/{{ question.id }}/&quot;&gt;{{ question.question_text }}&lt;/a&gt;&lt;/li&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Change to </p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;!--polls/index.html--&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;li&gt;&lt;a href=&quot;{% url &#x27;detail&#x27; question.id %}&quot;&gt;{{ question.question_text }}&lt;/a&gt;&lt;/li</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>It is because we defined the name argument in the </p><p>[<strong>path()</strong>]<!-- -->    <a href="https://docs.djangoproject.com/en/4.0/ref/urls/#django.urls.path" target="_blank" rel="noopener noreferrer">https://docs.djangoproject.com/en/4.0/ref/urls/#django.urls.path</a> </p><p> func. in the polls/urls.py module. So we can use <code>{% url %}</code> template tag.</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="namespacing-url-names">Namespacing URL names<a class="hash-link" href="#namespacing-url-names" title="Direct link to heading">​</a></h5><p>How does Django differentiate the URL names between numerous Apps.</p><p>Use <strong>namespace</strong> to Ur URLconf. Go to <em>polls/urls.py</em> and add an app_name to set the application namespace. Then , modify <em>polls/index.html</em></p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">#polls/urls.py</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">app_name = &#x27;polls&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">urlpatterns = [...]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;!--polls/index.html--&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;li&gt;&lt;a href=&quot;{% url &#x27;polls:detail&#x27; question.id %}&quot;&gt;{{ question.question_text }}&lt;/a&gt;&lt;/li&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="write-a-minimal-form">Write a minimal form<a class="hash-link" href="#write-a-minimal-form" title="Direct link to heading">​</a></h2><ul><li>action : <code>{% url &#x27;polls:vote&#x27; question.id %}</code> , We have created URLconf for the polls application in <em>polls/urls.py</em></li><li>Prevent <a href="https://docs.djangoproject.com/en/4.0/ref/csrf/" target="_blank" rel="noopener noreferrer">Cross Site Request Forgeries</a> : <code>{% csrf_token %}</code></li></ul><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;!-- polls/templates/polls/detail.html --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;form action=&quot;{% url &#x27;polls:vote&#x27; question.id %}&quot; method=&quot;post&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{% csrf_token %}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;fieldset&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;legend&gt;&lt;h1&gt;{{ question.question_text }}&lt;/h1&gt;&lt;/legend&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {% if error_message %}&lt;p&gt;&lt;strong&gt;{{ error_message }}&lt;/strong&gt;&lt;/p&gt;{% endif %}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {% for choice in question.choice_set.all %}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;input type=&quot;radio&quot; name=&quot;choice&quot; id=&quot;choice{{ forloop.counter }}&quot; value=&quot;{{ choice.id }}&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;label for=&quot;choice{{ forloop.counter }}&quot;&gt;{{ choice.choice_text }}&lt;/label&gt;&lt;br&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {% endfor %}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/fieldset&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;input type=&quot;submit&quot; value=&quot;Vote&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/form&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><ul><li>revise views.py =&gt; <code>def vote():</code></li></ul><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">from django.http import HttpResponse, HttpResponseRedirect</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from django.shortcuts import get_object_or_404, render</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from django.urls import reverse</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from .models import Choice, Question</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def vote(request, question_id):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    question = get_object_or_404(Question, pk=question_id)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    try:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        selected_choice = question.choice_set.get(pk=request.POST[&#x27;choice&#x27;])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    except (KeyError, Choice.DoesNotExist):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Redisplay the question voting form.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return render(request, &#x27;polls/detail.html&#x27;, {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;question&#x27;: question,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;error_message&#x27;: &quot;You didn&#x27;t select a choice.&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    else:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        selected_choice.votes += 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        selected_choice.save()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Always return an HttpResponseRedirect after successfully dealing</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # with POST data. This prevents data from being posted twice if a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # user hits the Back button.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return HttpResponseRedirect(reverse(&#x27;polls:results&#x27;, args=(question.id,)))</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><ul><li><p>revise views.py =&gt; <code>def results():</code> </p><p>which is almost the same as <code>def detail():</code></p></li></ul><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">def results(request, question_id):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    question = get_object_or_404(Question, pk=question_id)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return render(request, &#x27;polls/results.html&#x27;, {&#x27;question&#x27;: question})</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><ul><li>add new file in templates/polls &lt;  result .html&gt;</li></ul><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;!--polls/templates/polls/result.html--&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;h1&gt;{{ question.question_text }}&lt;/h1&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;ul&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{% for choice in question.choice_set.all %}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;li&gt;{{ choice.choice_text }} -- {{ choice.votes }} vote{{ choice.votes|pluralize }}&lt;/li&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{% endfor %}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/ul&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;a href=&quot;{% url &#x27;polls:detail&#x27; question.id %}&quot;&gt;Vote again?&lt;/a&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="generic-view">Generic view<a class="hash-link" href="#generic-view" title="Direct link to heading">​</a></h3><p><a href="https://docs.djangoproject.com/en/4.0/ref/class-based-views/generic-display/#django.views.generic.list.ListView" target="_blank" rel="noopener noreferrer">Generic display views</a></p><p>Less code is better!All the html files we have is similar(redundant). What the files do is : Getting data from DB(according to the URL) , Loading template and returning the rendered one. </p><p>Django provides a shortcut called the &quot;generic views&quot; system, which abstract common patterns to the point , so we do not need to write Python code.</p><blockquote><p><strong>code-shuffle?</strong></p><p>Generally, U will know whether generic views are a good fit for Ur problem. Therefore , U will use them from the beginning, rather than refactoring code halfway through.</p></blockquote><ol><li>Convert the URLconf.</li><li>Delete some of the old, unneeded views.</li><li>Introduce new views based on Django&#x27;s generic views.</li></ol><h5 class="anchor anchorWithStickyNavbar_mojV" id="amend-urlconf">Amend URLconf<a class="hash-link" href="#amend-urlconf" title="Direct link to heading">​</a></h5><ul><li>Change from <code>views.index</code> to <code>views.IndexView.as_view()</code> ... and also Details and result.</li><li>Change from <code>&lt; int:question_id&gt;</code> to  <code>&lt; int:pk&gt;</code> </li><li>vote remains the same.</li></ul><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">#polls/urls.py</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from django.urls import path</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from . import views</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">app_name = &#x27;polls&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">urlpatterns = [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    path(&#x27;&#x27;, views.IndexView.as_view(), name=&#x27;index&#x27;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    path(&#x27;&lt;int:pk&gt;/&#x27;, views.DetailView.as_view(), name=&#x27;detail&#x27;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    path(&#x27;&lt;int:pk&gt;/results/&#x27;, views.ResultsView.as_view(), name=&#x27;results&#x27;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    path(&#x27;&lt;int:question_id&gt;/vote/&#x27;, views.vote, name=&#x27;vote&#x27;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">]</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h5 class="anchor anchorWithStickyNavbar_mojV" id="amend-views">Amend views<a class="hash-link" href="#amend-views" title="Direct link to heading">​</a></h5><ul><li><p><code>from django.views import generic</code></p></li><li><p>Change class index, details, results</p><p>*write comments below the def , and U can see the usages of the function when U hover on it.</p><ul><li>We use two generic views here : ListView and DetailView.<ul><li>Both Views use a default template called <strong>&lt;app</strong> <strong>name&gt;/&lt;model</strong> <strong>name&gt;_list(or detail).html</strong></li><li>In DetailView, the <strong>question</strong> variable is provided automatically.</li><li>In ListView, the default variable is <strong>question_list</strong>, So we need to provide the <strong>context_object_name</strong> attribute, telling it that we want to use <strong>latest_question_list</strong> instead.</li></ul></li><li>Each generic views needs to know which model to use.</li><li></li></ul><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">class IndexView(generic.ListView):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    template_name = &#x27;polls/index.html&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    context_object_name = &#x27;latest_question_list&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def get_queryset(self):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Return the last five published questions (not including those set to be</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        published in the future).</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return Question.objects.filter(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            pub_date__lte=timezone.now()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ).order_by(&#x27;-pub_date&#x27;)[:5]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class DetailView(generic.DetailView):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    model = Question</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    template_name = &#x27;polls/detail.html&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def get_queryset(self):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Excludes any questions that aren&#x27;t published yet.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return Question.objects.filter(pub_date__lte=timezone.now())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class ResultsView(generic.DetailView):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    model = Question</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    template_name = &#x27;polls/results.html&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div></li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="testing">Testing<a class="hash-link" href="#testing" title="Direct link to heading">​</a></h2><p><a href="https://docs.djangoproject.com/en/4.0/topics/testing/" target="_blank" rel="noopener noreferrer">Testing in Django</a></p><p>U can test by prompt <code>python manage.py shell</code> to call the shell, and entering data to check how it behaves, or just run the application. However <strong>automated tests</strong> is that the testing work is done for U by the system. The biggest advantage is that U <strong>create a set of tests once</strong>, and then as U make changes to Ur app, U can check that Ur code still <strong>works as U originally intended</strong>. </p><p>Why Test?</p><ul><li>Save Ur time.</li><li>Not to identify problems, they prevent them.</li><li>Make Ur code more attractive</li><li>Helps teams work together</li></ul><p>Good rules-of-thumb include having:</p><ul><li>A separate <strong>TestClass</strong>  for each model or view</li><li>A separate test method for each set of conditions U want to test</li><li>Test method names that describe their function</li></ul><h4 class="anchor anchorWithStickyNavbar_mojV" id="create-a-test-to-expose-the-bug">Create a test to expose the bug<a class="hash-link" href="#create-a-test-to-expose-the-bug" title="Direct link to heading">​</a></h4><ul><li>edit in <em>polls/tests.py</em></li><li><code>from django.test import Testcase</code></li><li>create django.test.TestCase subclass</li></ul><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">#polls/tests.py</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import datetime</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from django.test import TestCase</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from django.utils import timezone</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from .models import Question</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class QuestionModelTests(TestCase):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def test_was_published_recently_with_future_question(self):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        was_published_recently() returns False for questions whose pub_date</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        is in the future.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        time = timezone.now() + datetime.timedelta(days=30)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        future_question = Question(pub_date=time)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.assertIs(future_question.was_published_recently(), False)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><ul><li><code>python manage.py test polls</code> , what it did<ol><li>looked for tests in the <strong>polls</strong> app</li><li>found subclass of the django.test.TestCase class</li><li>created a special DB for testing</li><li>looked for test method - <strong>one whose names begin with &quot;test&quot;</strong></li><li>in <em>test_was_published_recently_with_future_question</em> , it create a instance whose <em>pub_date</em> field is 30 days in the future</li><li>use <code>assertIs()</code> method, discover that it returns <strong>True</strong>, though we want it to return <strong>False</strong></li></ol></li></ul><h4 class="anchor anchorWithStickyNavbar_mojV" id="fix-the-bug">Fix the bug<a class="hash-link" href="#fix-the-bug" title="Direct link to heading">​</a></h4><ul><li>We know what the problem is, so amend the method in models.py</li><li>run the test again</li></ul><h4 class="anchor anchorWithStickyNavbar_mojV" id="more-comprehensive-tests">More comprehensive tests<a class="hash-link" href="#more-comprehensive-tests" title="Direct link to heading">​</a></h4><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">#polls/tests.py</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import datetime</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from django.test import TestCase</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from django.utils import timezone</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from .models import Question</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class QuestionModelTests(TestCase):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def test_was_published_recently_with_future_question(self):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        was_published_recently() returns False for questions whose pub_date</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        is in the future.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        time = timezone.now() + datetime.timedelta(days=30)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        future_question = Question(pub_date=time)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.assertIs(future_question.was_published_recently(), False)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def test_was_published_recently_with_old_question(self):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        was_published_recently() returns False for questions whose pub_date</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        is older than 1 day.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        time = timezone.now() - datetime.timedelta(days=1, seconds=1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        old_question = Question(pub_date=time)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.assertIs(old_question.was_published_recently(), False)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def test_was_published_recently_with_recent_question(self):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        was_published_recently() returns True for questions whose pub_date</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        is within the last day.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        time = timezone.now() - datetime.timedelta(hours=23, minutes=59, seconds=59)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        recent_question = Question(pub_date=time)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.assertIs(recent_question.was_published_recently(), True)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="test-a-view">Test a view<a class="hash-link" href="#test-a-view" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_mojV" id="django-test-client">Django test Client<a class="hash-link" href="#django-test-client" title="Direct link to heading">​</a></h4><p><a href="https://docs.djangoproject.com/en/4.0/topics/testing/tools/#django.test.Client" target="_blank" rel="noopener noreferrer">Testing tools |Client</a></p><ul><li><p>Test in shell , since the things we did are not necessary in test.py</p><ul><li><p><code>python manage.py shell</code></p></li><li><p><code>from django.test.utils import setup_test_environment</code></p></li><li><p><code>setup_test_environment()</code> : </p><ul><li>installs template renderer which will allow us to examine some additional attributes on responses such as  <strong>response.context</strong>  </li><li>However it would not create a test DB, it tests in existing DB.</li></ul></li><li><p><code>from django.test import Client</code></p></li><li><p><code>client = Client()</code>  : create an instance of the client for our us</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">&gt;&gt;&gt; # get a response from &#x27;/&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt;&gt;&gt; response = client.get(&#x27;/&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#Not Found: /</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt;&gt;&gt; response.status_code</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#404</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt;&gt;&gt; # we&#x27;ll use &#x27;reverse()&#x27; rather than a hardcoded URL</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt;&gt;&gt; from django.urls import reverse</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt;&gt;&gt; response = client.get(reverse(&#x27;polls:index&#x27;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt;&gt;&gt; response.status_code</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#200</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt;&gt;&gt; response.content</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">b&#x27;\n    &lt;ul&gt;\n    \n        &lt;li&gt;&lt;a href=&quot;/polls/1/&quot;&gt;What&amp;#x27;s up?&lt;/a&gt;&lt;/li&gt;\n    \n    &lt;/ul&gt;\n\n&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt;&gt;&gt; response.context[&#x27;latest_question_list&#x27;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#&lt;QuerySet [&lt;Question: What&#x27;s up?&gt;]&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div></li></ul></li><li><p>After amend the bugs, let&#x27;s create automated test</p><ul><li><p>[<strong>django.test.TestCase</strong>]<!-- -->    <a href="https://docs.djangoproject.com/en/4.0/topics/testing/tools/#django.test.TestCase" target="_blank" rel="noopener noreferrer">https://docs.djangoproject.com/en/4.0/topics/testing/tools/#django.test.TestCase</a> </p><p>provide other assert methods  like <code>assertContains()</code>、<code>assertQuerysetEqual()</code></p></li></ul><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">#polls/tests.py</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from django.urls import reverse</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def create_question(question_text, days):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Create a question with the given `question_text` and published the</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    given number of `days` offset to now (negative for questions published</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    in the past, positive for questions that have yet to be published).</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    time = timezone.now() + datetime.timedelta(days=days)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return Question.objects.create(question_text=question_text, pub_date=time)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class QuestionIndexViewTests(TestCase):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def test_no_questions(self):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        If no questions exist, an appropriate message is displayed.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        response = self.client.get(reverse(&#x27;polls:index&#x27;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.assertEqual(response.status_code, 200)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.assertContains(response, &quot;No polls are available.&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.assertQuerysetEqual(response.context[&#x27;latest_question_list&#x27;], [])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def test_past_question(self):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Questions with a pub_date in the past are displayed on the</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        index page.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        question = create_question(question_text=&quot;Past question.&quot;, days=-30)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        response = self.client.get(reverse(&#x27;polls:index&#x27;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.assertQuerysetEqual(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            response.context[&#x27;latest_question_list&#x27;],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            [question],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def test_future_question(self):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Questions with a pub_date in the future aren&#x27;t displayed on</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        the index page.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        create_question(question_text=&quot;Future question.&quot;, days=30)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        response = self.client.get(reverse(&#x27;polls:index&#x27;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.assertContains(response, &quot;No polls are available.&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.assertQuerysetEqual(response.context[&#x27;latest_question_list&#x27;], [])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def test_future_question_and_past_question(self):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Even if both past and future questions exist, only past questions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        are displayed.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        question = create_question(question_text=&quot;Past question.&quot;, days=-30)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        create_question(question_text=&quot;Future question.&quot;, days=30)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        response = self.client.get(reverse(&#x27;polls:index&#x27;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.assertQuerysetEqual(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            response.context[&#x27;latest_question_list&#x27;],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            [question],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def test_two_past_questions(self):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        The questions index page may display multiple questions.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        question1 = create_question(question_text=&quot;Past question 1.&quot;, days=-30)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        question2 = create_question(question_text=&quot;Past question 2.&quot;, days=-5)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        response = self.client.get(reverse(&#x27;polls:index&#x27;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.assertQuerysetEqual(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            response.context[&#x27;latest_question_list&#x27;],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            [question2, question1],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        )</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><ul><li>We also need to test the DetailView and ResultView, in case of someone knew or guess the URL. So we add a similar constraint to DetailView and ResultView.</li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="customize-apps-look-and-feel">Customize App&#x27;s look and feel<a class="hash-link" href="#customize-apps-look-and-feel" title="Direct link to heading">​</a></h2><p>Aside from the HTML generated by the server, we also need CSS, JavaScript, images etc. to render the page. In Django , we refer to these files as &quot;static files&quot;. And <strong>django.contrib.staticfiles</strong> help us collects static files in different apps into a single location that can easily be served in production.</p><ol><li><p>Create a directory &lt;  static&gt; in polls.</p></li><li><p>Create a directory &lt;  polls&gt; in static, and then create a file &lt; style.css &gt;</p></li><li><p>edit .css</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">/*  polls/static/polls/style.css  */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">li a {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    color: green;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div></li><li><p>edit index.html , add these in the top</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;!-- polls/templates/polls/index.html  --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{% load static %}&lt;!--generates the absolute URL of static files.--&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;{% static &#x27;polls/style.css&#x27; %}&quot;&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div></li></ol><h5 class="anchor anchorWithStickyNavbar_mojV" id="add-images">Add images<a class="hash-link" href="#add-images" title="Direct link to heading">​</a></h5><ol><li>Create a directory &lt; images&gt; in the same directory as style.css</li><li>Put images into it</li><li>edit style.css</li></ol><h2 class="anchor anchorWithStickyNavbar_mojV" id="customize-the-admin-form">Customize the admin form<a class="hash-link" href="#customize-the-admin-form" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="admin-form">Admin form<a class="hash-link" href="#admin-form" title="Direct link to heading">​</a></h3><ul><li><p>We can change order of field.</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">#polls/admin.py</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class QuestionAdmin(admin.ModelAdmin):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fields = [&#x27;pub_date&#x27;, &#x27;question_text&#x27;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">admin.site.register(Question, QuestionAdmin)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div></li></ul><ul><li><p>Split the form up into fieldsets</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">#polls/admin.py</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class QuestionAdmin(admin.ModelAdmin):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fieldsets = [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        (None,               {&#x27;fields&#x27;: [&#x27;question_text&#x27;]}),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        (&#x27;Date information&#x27;, {&#x27;fields&#x27;: [&#x27;pub_date&#x27;]}),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">admin.site.register(Question, QuestionAdmin)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div></li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="adding-related-objects">Adding related objects<a class="hash-link" href="#adding-related-objects" title="Direct link to heading">​</a></h3><p><strong>Question</strong> has multiple <strong>Choices</strong>, there are 2 methods to connect them.</p><ol><li><p>Do what Question do</p><p><code>from .models import Choice</code></p><p><code>admin.site.register(Choice)</code></p><p>But we can only add one choice at once.</p></li><li><p>Add Choice with Question</p><p>remove <code>admin.site.register(Choice)</code></p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">#polls/admin.py</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class ChoiceInline(admin.StackedInline):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    model = Choice</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    extra = 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class QuestionAdmin(admin.ModelAdmin):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fieldsets = [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    inlines = [ChoiceInline]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">admin.site.register(Question, QuestionAdmin)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div></li></ol><h5 class="anchor anchorWithStickyNavbar_mojV" id="change-stackedinline-to-tabularinline">Change <code>StackedInline</code> to <code>TabularInline</code><a class="hash-link" href="#change-stackedinline-to-tabularinline" title="Direct link to heading">​</a></h5><p>​		</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="admin-change-list">Admin change list<a class="hash-link" href="#admin-change-list" title="Direct link to heading">​</a></h3><p>Add field name <code>list_display = ()</code></p><p>Add filter <code>list_filter = [&#x27;pub_date&#x27;]</code></p><p>Add search bar <code>search_fields = [&#x27;question_text&#x27;]</code></p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">#polls/admin.py</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class QuestionAdmin(admin.ModelAdmin):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    list_display = (&#x27;question_text&#x27;, &#x27;pub_date&#x27;, &#x27;was_published_recently&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    list_filter = [&#x27;pub_date&#x27;]</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Using <code>display()</code>decorator to decorate dufault field name &#x27;was_published_recently&#x27;</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">#polls/models.py</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class Question(models.Model):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @admin.display(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        boolean=True,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ordering=&#x27;pub_date&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        description=&#x27;Published recently?&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def was_published_recently(self):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        now = timezone.now()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return now - datetime.timedelta(days=1) &lt;= self.pub_date &lt;= now</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/yehs1225/yehs1225.github.io/docs/Django/[DJ]GetStarted-documents.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/Django/[DJ]Deploy"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Deploy</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/Django/[DJ]GetStartedBuildCRM[1]"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">GetStarted - build CRM [1]</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#know-django" class="table-of-contents__link toc-highlight">Know Django</a></li><li><a href="#set-up-miniconda" class="table-of-contents__link toc-highlight">Set up miniconda</a></li><li><a href="#start-using-django" class="table-of-contents__link toc-highlight">Start using django</a></li><li><a href="#build-an-polls-app" class="table-of-contents__link toc-highlight">Build an polls app</a><ul><li><a href="#set-up-a-database" class="table-of-contents__link toc-highlight">Set up a database</a></li></ul></li><li><a href="#introducing-the-django-admin" class="table-of-contents__link toc-highlight">Introducing the Django Admin</a></li><li><a href="#write-more-views" class="table-of-contents__link toc-highlight">Write more views</a><ul><li><a href="#let-views-actually-do-something" class="table-of-contents__link toc-highlight">Let views actually do something</a></li><li><a href="#removing-hardcoded-urls-in-templates" class="table-of-contents__link toc-highlight">Removing hardcoded URLs in templates</a></li></ul></li><li><a href="#write-a-minimal-form" class="table-of-contents__link toc-highlight">Write a minimal form</a><ul><li><a href="#generic-view" class="table-of-contents__link toc-highlight">Generic view</a></li></ul></li><li><a href="#testing" class="table-of-contents__link toc-highlight">Testing</a><ul><li><a href="#test-a-view" class="table-of-contents__link toc-highlight">Test a view</a></li></ul></li><li><a href="#customize-apps-look-and-feel" class="table-of-contents__link toc-highlight">Customize App&#39;s look and feel</a></li><li><a href="#customize-the-admin-form" class="table-of-contents__link toc-highlight">Customize the admin form</a><ul><li><a href="#admin-form" class="table-of-contents__link toc-highlight">Admin form</a></li><li><a href="#adding-related-objects" class="table-of-contents__link toc-highlight">Adding related objects</a></li><li><a href="#admin-change-list" class="table-of-contents__link toc-highlight">Admin change list</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 Tzu Hsuan Yeh. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.39d34c20.js"></script>
<script src="/assets/js/main.5c1be6b3.js"></script>
</body>
</html>